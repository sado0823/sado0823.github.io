<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Go-Kitx RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Go-Kitx Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Go-Kitx" href="/opensearch.xml"><title data-rh="true">Clean Architecture | Go-Kitx</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sado0823.github.io/blog/clean-architecture"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Clean Architecture | Go-Kitx"><meta data-rh="true" name="description" content="&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;最近感觉网络上贩卖的焦虑实在是太多了, 其实以前也多多少少有这种感觉, 最近尤为严重, 可能也和开年后工作强度变大有关吧, 搞的身心比较疲惫. 一些专业性比较强的书也看不进去了, 拿起来之前没有看完的 Bob 大叔整洁系列的书慢慢看完了, 不得不说, 看书确实是一种比较好的降压方式, 本篇文章主要记录一些书中的内容."><meta data-rh="true" property="og:description" content="&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;最近感觉网络上贩卖的焦虑实在是太多了, 其实以前也多多少少有这种感觉, 最近尤为严重, 可能也和开年后工作强度变大有关吧, 搞的身心比较疲惫. 一些专业性比较强的书也看不进去了, 拿起来之前没有看完的 Bob 大叔整洁系列的书慢慢看完了, 不得不说, 看书确实是一种比较好的降压方式, 本篇文章主要记录一些书中的内容."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-05-24T22:25:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/sado0823"><meta data-rh="true" property="article:tag" content="architecture,uncle bob"><link data-rh="true" rel="icon" href="/img/emoji.svg"><link data-rh="true" rel="canonical" href="https://sado0823.github.io/blog/clean-architecture"><link data-rh="true" rel="alternate" href="https://sado0823.github.io/blog/clean-architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://sado0823.github.io/blog/clean-architecture" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://Y6EGDIBDW1-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.bf2e4380.css">
<link rel="preload" href="/assets/js/runtime~main.14a9731a.js" as="script">
<link rel="preload" href="/assets/js/main.33f89242.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarPlaceholder_NC_W"></div><div class="announcementBarContent_KsVm">⭐️ 如果这个网站能帮助到你,欢迎给一个star支持作者  <a target="_blank" rel="noopener noreferrer" href="https://github.com/sado0823/go-kitx">GitHub</a></div><button type="button" class="clean-btn close announcementBarClose_FG1z" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/emoji.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/emoji.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate">Go-Kitx</b></a><a class="navbar__item navbar__link" href="/docs/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog/archive">Archive</a><a class="navbar__item navbar__link" href="/blog/tags">Tags</a><a href="https://github.com/sado0823/go-kitx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_TMXw thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_V4zb margin-bottom--md">All my posts</div><ul class="sidebarItemList_uHd5 clean-list"><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/sre-slo-alert">基于slo的告警策略</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/computer-science-memory">内存</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/computer-science-lock">锁</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/climb-stairs-dp">从&quot;爬楼梯&quot;了解动态规划算法</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/go-error-handle">go错误处理工程化实践</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/token-limit">token令牌桶限流算法</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/bbr-limit">bbr自适应限流算法</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/bloom-filter">Go Bloom Filter</a></li><li class="sidebarItem_spIe"><a aria-current="page" class="sidebarItemLink_eqrF sidebarItemLinkActive_XZSJ" href="/blog/clean-architecture">Clean Architecture</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/opentrace-demo">Opentrace Demo</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/rpc-opentrace">Rpc And Opentrace</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/etcd-introduction">Etcd入门 &amp; go操作</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/redis-notion">Redis - 概念</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/redis-introduction">Redis - 入门</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/docker-laradock">基于Docker快速搭建nginx+...</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/docker-and-compose">Docker And Docker-Compose</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/websocket-swoole">Websocket And swoole</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">Clean Architecture</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-05-24T22:25:00.000Z" itemprop="datePublished">May 24, 2022</time> · <!-- -->15 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/sado0823" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="/img/avatar.jpeg" alt="sado"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/sado0823" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">sado</span></a></div><small class="avatar__subtitle" itemprop="description">Developer</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p> <!-- --> <!-- --> <!-- --> <!-- -->最近感觉网络上贩卖的焦虑实在是太多了, 其实以前也多多少少有这种感觉, 最近尤为严重, 可能也和开年后工作强度变大有关吧, 搞的身心比较疲惫. 一些专业性比较强的书也看不进去了, 拿起来之前没有看完的 Bob 大叔整洁系列的书慢慢看完了, 不得不说, 看书确实是一种比较好的降压方式, 本篇文章主要记录一些书中的内容.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="1-介绍">1) 介绍<a class="hash-link" href="#1-介绍" title="Direct link to heading">​</a></h2><p> <!-- --> <!-- --> <!-- --> <!-- -->这本书为 Bob 大叔(Robert C. Martin)的著名作品, 同系列的还有《代码整洁之道》, 都是经典作品, 值得阅读. 该书系统的剖析了架构设计的缘起, 内涵以及应用场景.</p><ul><li><p>第 1 部分描述架构设计的<code>重点</code>与<code>模式</code></p></li><li><p>第 2~4 部分主要为<code>编程范式</code></p></li><li><p>第 5 部分为架构设计中的<code>组件边界</code>、<code>设计模式</code>等</p></li><li><p>第 6 部分为<code>实现细节</code></p></li><li><p>附录部分为作者的一些亲身经历等</p></li></ul><p> <!-- --> <!-- --> <!-- --> <!-- -->这个系列其实还有一本作品 - 《代码整洁之道 - 程序员的职业素养》(The Clean Coder - A code of Conduct For Professional Programmers), 主要讲述作者的一些经历, 如何走上编程道路等, 同样推荐阅读. 读完不禁感叹, 大神的成长之路也不是一帆风顺的, 其中经验虽然不能说一定适用于现在, 但是完全值得我们学习和借鉴的.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="2-设计与架构究竟是什么">2) 设计与架构究竟是什么<a class="hash-link" href="#2-设计与架构究竟是什么" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="1-目标">1) 目标<a class="hash-link" href="#1-目标" title="Direct link to heading">​</a></h3><p>软件架构的终极目标</p><div class="language-js codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-js codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">用最小的人力成本满足构建和维护该系统的需求</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="2-两个价值维度">2) 两个价值维度<a class="hash-link" href="#2-两个价值维度" title="Direct link to heading">​</a></h3><p>可以从<code>两个价值维度</code>来描述</p><ul><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="行为价值">行为价值<a class="hash-link" href="#行为价值" title="Direct link to heading">​</a></h4></li></ul><p>是最直观的价值维度, 程序员的工作就是让机器按照某种指定方式运行, 给系统的使用者创造或者提高利润.</p><p>大部分程序员认为这就是他们的全部工作. 他们的工作是且仅是:</p><p><code>按照需求文档编写代码, 并且修复任何Bug.</code></p><p>这是大错特错的.</p><ul><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="架构价值">架构价值<a class="hash-link" href="#架构价值" title="Direct link to heading">​</a></h4></li></ul><p>软件系统的第二个价值维度, 是指软件的灵活性, 软件必须保持灵活.</p><p>从系统相关方的角度来看, 他们提出的一系列的变更需求范畴都是类似的, 因此成本也应该是固定的.</p><p>但是从研发者角度来看, 系统用户持续不断的变更需求就像是要求他们不停的用一堆不同形状的拼图块, 拼出一个新的形状, 整个过程将会越来越困难. <code>问题的根源就是系统的架构设计</code></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="3-哪个价值维度更重要">3) 哪个价值维度更重要<a class="hash-link" href="#3-哪个价值维度更重要" title="Direct link to heading">​</a></h3><p> <!-- --> <!-- --> <!-- --> <!-- -->不同的人给出的答案会不一样. 业务部门觉得系统正常工作很重要, 很多开发人员也跟随采取了这种态度, 但是 Bob 大叔认为这种态度是错误的.</p><ul><li>可以正常工作, 但是无法修改. 那么当需求变更时, 它将无法正常工作, 我们也无法修改, 因此价值为 0</li><li>无法正常工作, 易于修改. 可以随着续期变化不断修改, 不断产生价值.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="4-艾森豪威尔矩阵">4) 艾森豪威尔矩阵<a class="hash-link" href="#4-艾森豪威尔矩阵" title="Direct link to heading">​</a></h3><table><thead><tr><th align="center">重要且紧急</th><th align="center">重要不紧急</th></tr></thead><tbody><tr><td align="center">不重要但紧急</td><td align="center">不重要且不紧急</td></tr></tbody></table><p> <!-- --> <!-- --> <!-- --> <!-- -->重要的事情占据了前面两位, 开发人员和业务部门经常犯的共同错误就是把第三优先级<code>不重要但紧急</code>的事情提到了第一优先级去做, 也就是说没有把<code>真正紧急且重要</code>和<code>紧急但是不重要</code>的功能分开, 这个错误导致了重要的事被忽略了, 重要的系统架构问题让位给了不重要的系统行为功能.</p><p> <!-- --> <!-- --> <!-- --> <!-- -->但是研发人员还忘记了一点, 那就是业务部门原本就是没有能力评估系统架构的重要程度的, <code>这本来就应该是研发人员自己的工作职责</code>.</p><p> <!-- --> <!-- --> <!-- --> <!-- -->如果忽视软件架构的价值, 系统将会变得越来越难以维护, 终会有一条, 系统将会变得无法修改. 如果系统变成了这个样子, 那么说明软件开发团队没有和需求方做足够的抗争, 没有完成自己应尽的职责.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="3-编程范式">3) 编程范式<a class="hash-link" href="#3-编程范式" title="Direct link to heading">​</a></h2><p> <!-- --> <!-- --> <!-- --> <!-- -->编程范式指的是程序的编写模式, 与具体的编程语言关系较小, 这些范式会告诉你应该在什么时候采用什么样的代码结构. 直到今天, 我们也一共只有三个编程范式, 而且未来几乎不可能出现新的.</p><p> <!-- --> <!-- --> <!-- --> <!-- -->每个编程范式都从某一方面<code>限制</code>和<code>规范</code>了程序员的能力, 这些范式主要是为了告诉我们不能做什么, 而不是可以做什么.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="1-结构化编程">1) 结构化编程<a class="hash-link" href="#1-结构化编程" title="Direct link to heading">​</a></h3><p><code>结构化编程对程序控制权的直接转移进行了限制和规范</code></p><p>主张限制<code>goto</code>等无限制的跳转语句, 使用熟知的<code>if/then/else/do/while/until</code>等语句来进行替换</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="2-面向对象编程">2) 面向对象编程<a class="hash-link" href="#2-面向对象编程" title="Direct link to heading">​</a></h3><p><code>面向对象编程对程序控制权的间接转移进行了限制和规范</code></p><p>三大特性为<code>封装</code>、 <code>继承</code>、 <code>多态</code>, 涉及到的概念还有<code>控制反转</code>(实现方式有<code>依赖注入</code>), 现代代表语言有 java 等...</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="3-函数式编程">3) 函数式编程<a class="hash-link" href="#3-函数式编程" title="Direct link to heading">​</a></h3><p><code>函数式编程对程序中的赋值进行了限制和规范</code></p><p> <!-- --> <!-- --> <!-- --> <!-- -->从理论上来说, 函数式编程语言中应该是没有赋值语句的, 大部分函数式编程语言只允许在非常严格的条件下, 才可以更改某个变量的值.</p><p>当然上面说的只是一种思想, 实际运用起来肯定还是有差别的, 现代代表语言有 golang 等...</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="4-solid-设计原则">4) SOLID 设计原则<a class="hash-link" href="#4-solid-设计原则" title="Direct link to heading">​</a></h2><p> <!-- --> <!-- --> <!-- --> <!-- -->通常来说, 想要构建一个好的软件系统, 应该从写整洁的代码开始(可以看看 Bob 大叔的《代码整洁之道》). <code>SOLID设计原则</code>就是用来解决这样的问题, 告诉我们如何组织数据和函数等.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="1-s---单一职责原则">1) S - 单一职责原则<a class="hash-link" href="#1-s---单一职责原则" title="Direct link to heading">​</a></h3><p> <!-- --> <!-- --> <!-- --> <!-- -->基于<code>康威定律(Conway&#x27;s Law)</code>的一个推论, 一个软件系统的最佳架构高度依赖于开发这个系统组织的内部结构. 这样, 每个软件的模块都有且只有一个需要被改变的原则.</p><p>康威定律: 软件架构能够反映出制作团队的组织架构</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="2-o---开闭原则">2) O - 开闭原则<a class="hash-link" href="#2-o---开闭原则" title="Direct link to heading">​</a></h3><p> <!-- --> <!-- --> <!-- --> <!-- -->由<code>Bertrand Meyer</code>在 20 世纪 80 年代大力推广, 核心要素为: 如果软件系统要想更容易被改变, 那么其设计就必须允许新增代码来修改系统行为, 而非只能靠修改原来的代码.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="3-l---里氏替换原则">3) L - 里氏替换原则<a class="hash-link" href="#3-l---里氏替换原则" title="Direct link to heading">​</a></h3><p> <!-- --> <!-- --> <!-- --> <!-- -->由<code>Barbara Liskov</code>在 1988 年提出的一个子类型定义, 简而言之为: 如果要用可替换的组件来构建软件系统, 那么这些组件必须遵守同一个约定, 以便让这些组件可以相互替换.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="4-i---接口隔离原则">4) I - 接口隔离原则<a class="hash-link" href="#4-i---接口隔离原则" title="Direct link to heading">​</a></h3><p> <!-- --> <!-- --> <!-- --> <!-- -->主要告诫软件设计师应该再设计中避免不必要的依赖</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="5-d---依赖反转原则">5) D - 依赖反转原则<a class="hash-link" href="#5-d---依赖反转原则" title="Direct link to heading">​</a></h3><p> <!-- --> <!-- --> <!-- --> <!-- -->该设计原则指出: 高层策略性的代码不应该依赖实现底层细节的代码, 恰恰相反, 那些实现底层细节的代码应该依赖高层策略性的代码</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="5-软件架构">5) 软件架构<a class="hash-link" href="#5-软件架构" title="Direct link to heading">​</a></h2><p> <!-- --> <!-- --> <!-- --> <!-- -->Bob 大叔书中有个观点我个人非常认可. 首先, <code>软件架构师自身需要是程序员, 并且必须一直坚持做一线程序员, 绝对不要听从那些说应该让软件架构师从代码中解放出来以专心解决高阶问题的伪建议</code>. 如果不亲身承受因系统设计而带来的麻烦, 就体会不到设计不佳所带来的的痛苦, 接着就会逐渐迷失正确的设计方向.</p><p>软件系统的架构质量是由它的构建者所决定的, 软件架构这项工作的实质就是:</p><p><code>规划如何将系统切分为组件, 并且安排好组件之间的排列关系, 以及组件之间相互通信的方式.</code></p><p>包含以下方面:</p><ul><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="开发development">开发(Development)<a class="hash-link" href="#开发development" title="Direct link to heading">​</a></h4></li><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="部署deployment">部署(Deployment)<a class="hash-link" href="#部署deployment" title="Direct link to heading">​</a></h4></li><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="运行operation">运行(Operation)<a class="hash-link" href="#运行operation" title="Direct link to heading">​</a></h4></li><li><h4 class="anchor anchorWithStickyNavbar_mojV" id="维护maintenance">维护(Maintenance)<a class="hash-link" href="#维护maintenance" title="Direct link to heading">​</a></h4></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="6-整洁架构">6) 整洁架构<a class="hash-link" href="#6-整洁架构" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="1-一些基本的架构特点">1) 一些基本的架构特点<a class="hash-link" href="#1-一些基本的架构特点" title="Direct link to heading">​</a></h3><ul><li>六边形架构</li><li>DCI 架构</li><li>BCE 架构</li></ul><p>基本特点:</p><ul><li>独立于框架</li><li>可被测试</li><li>独立于 UI</li><li>独立于数据库</li><li>独立于任何外部机构</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="2-整洁构建">2) 整洁构建<a class="hash-link" href="#2-整洁构建" title="Direct link to heading">​</a></h3><p> <!-- --> <!-- --> <!-- --> <!-- -->这是 Bob 大叔根据一般性架构特点总结出来的一个独立概念</p><p><img loading="lazy" alt="image-20220313120349217" src="/assets/images/image-20220313120349217-17b56e8e3368a6f9b0590f912c6972c0.png" width="1122" height="810" class="img_E7b_"></p><ul><li><h5 class="anchor anchorWithStickyNavbar_mojV" id="依赖关系规则">依赖关系规则<a class="hash-link" href="#依赖关系规则" title="Direct link to heading">​</a></h5></li></ul><p> <!-- --> <!-- --> <!-- --> <!-- -->源码中的依赖关系规则必须只指向同心圆的内层, 即由底层机制指向高层策略</p><ul><li><h5 class="anchor anchorWithStickyNavbar_mojV" id="业务实体">业务实体<a class="hash-link" href="#业务实体" title="Direct link to heading">​</a></h5></li></ul><p> <!-- --> <!-- --> <!-- --> <!-- -->业务实体这一层封装的是整个系统的关键业务逻辑, 一个业务实体既可以是一个带有方法的对象, 也可以是一组数据结构的集合. 无论如何, 只要它能被系统中的其它不同应用复用就可以.</p><ul><li><h5 class="anchor anchorWithStickyNavbar_mojV" id="用例">用例<a class="hash-link" href="#用例" title="Direct link to heading">​</a></h5></li></ul><p> <!-- --> <!-- --> <!-- --> <!-- -->通常包含的是<code>特定应用场景下</code>的业务逻辑, 这里面封装并实现了整个系统的所有用例. 这些用例引导了数据在业务实体之间的流入和流出, 并指挥着<code>业务实体</code>利用其中的关键业务逻辑来实现用例的设计目标</p><p>用例层应该与<code>业务实体</code>和<code>外部因素</code>(比如数据库、UI、框架等)隔离</p><ul><li><h5 class="anchor anchorWithStickyNavbar_mojV" id="接口适配器">接口适配器<a class="hash-link" href="#接口适配器" title="Direct link to heading">​</a></h5></li></ul><p> <!-- --> <!-- --> <!-- --> <!-- -->软件的接口适配器通常是一组<code>数据转换器</code>, 转换成各层所需要的数据格式</p><ul><li><h5 class="anchor anchorWithStickyNavbar_mojV" id="框架与驱动程序">框架与驱动程序<a class="hash-link" href="#框架与驱动程序" title="Direct link to heading">​</a></h5></li></ul><p> <!-- --> <!-- --> <!-- --> <!-- -->最外层的<code>模型层</code>一般是由工具、数据库、Web 框架等组成的, 在这一层中, 我们通常只需要编写一些与内部沟通的粘合性代码.</p><p> <!-- --> <!-- --> <!-- --> <!-- -->框架与驱动程序层中包含了所有的实现细节. Web 是实现细节, 数据库也是实现细节, 将这些实现细节放在最外层, 这样他们就很难影响到其它层了.</p><ul><li><h5 class="anchor anchorWithStickyNavbar_mojV" id="只有四层吗">只有四层吗<a class="hash-link" href="#只有四层吗" title="Direct link to heading">​</a></h5></li></ul><p> <!-- --> <!-- --> <!-- --> <!-- -->只是为了说明结构和依赖关系, 并不是表示只能有 4 层. 有可能会超过四层, 但是其中的依赖关系是不会改变的.</p><p> <!-- --> <!-- --> <!-- --> <!-- -->源码层面的依赖关系一定要指向同心圆的内侧, 层次越往内, 其抽象和策略的层次就越高, 其包含的高层策略就越多. <code>最内层的圆中包含的是最通用、最高层的策略, 最外层的圆包含的是最具体的细节</code></p><p> <!-- --> <!-- --> <!-- --> <!-- -->感兴趣的同学还可以去看看现在大火的<code>DDD -领域驱动设计 </code>(Domain Drive Design)的思想, 不免可以找到一些共通之处.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="7-结束语">7) 结束语<a class="hash-link" href="#7-结束语" title="Direct link to heading">​</a></h2><p> <!-- --> <!-- --> <!-- --> <!-- -->希望大家能够有所收获, 成为自己心中想成为的架构师.</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_h6_j"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/architecture">architecture</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/uncle-bob">uncle bob</a></li></ul></div></footer></article><div></div><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/bloom-filter"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Go Bloom Filter</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/opentrace-demo"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Opentrace Demo</div></a></nav></main><div class="col col--2"><div class="tableOfContents_cNA8 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-介绍" class="table-of-contents__link toc-highlight">1) 介绍</a></li><li><a href="#2-设计与架构究竟是什么" class="table-of-contents__link toc-highlight">2) 设计与架构究竟是什么</a><ul><li><a href="#1-目标" class="table-of-contents__link toc-highlight">1) 目标</a></li><li><a href="#2-两个价值维度" class="table-of-contents__link toc-highlight">2) 两个价值维度</a></li><li><a href="#3-哪个价值维度更重要" class="table-of-contents__link toc-highlight">3) 哪个价值维度更重要</a></li><li><a href="#4-艾森豪威尔矩阵" class="table-of-contents__link toc-highlight">4) 艾森豪威尔矩阵</a></li></ul></li><li><a href="#3-编程范式" class="table-of-contents__link toc-highlight">3) 编程范式</a><ul><li><a href="#1-结构化编程" class="table-of-contents__link toc-highlight">1) 结构化编程</a></li><li><a href="#2-面向对象编程" class="table-of-contents__link toc-highlight">2) 面向对象编程</a></li><li><a href="#3-函数式编程" class="table-of-contents__link toc-highlight">3) 函数式编程</a></li></ul></li><li><a href="#4-solid-设计原则" class="table-of-contents__link toc-highlight">4) SOLID 设计原则</a><ul><li><a href="#1-s---单一职责原则" class="table-of-contents__link toc-highlight">1) S - 单一职责原则</a></li><li><a href="#2-o---开闭原则" class="table-of-contents__link toc-highlight">2) O - 开闭原则</a></li><li><a href="#3-l---里氏替换原则" class="table-of-contents__link toc-highlight">3) L - 里氏替换原则</a></li><li><a href="#4-i---接口隔离原则" class="table-of-contents__link toc-highlight">4) I - 接口隔离原则</a></li><li><a href="#5-d---依赖反转原则" class="table-of-contents__link toc-highlight">5) D - 依赖反转原则</a></li></ul></li><li><a href="#5-软件架构" class="table-of-contents__link toc-highlight">5) 软件架构</a></li><li><a href="#6-整洁架构" class="table-of-contents__link toc-highlight">6) 整洁架构</a><ul><li><a href="#1-一些基本的架构特点" class="table-of-contents__link toc-highlight">1) 一些基本的架构特点</a></li><li><a href="#2-整洁构建" class="table-of-contents__link toc-highlight">2) 整洁构建</a></li></ul></li><li><a href="#7-结束语" class="table-of-contents__link toc-highlight">7) 结束语</a></li></ul></div></div></div></div></div></div>
<script src="/assets/js/runtime~main.14a9731a.js"></script>
<script src="/assets/js/main.33f89242.js"></script>
</body>
</html>